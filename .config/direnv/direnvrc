use_python() {
    DIR_NAME=$(basename $(pwd))

    if [ -d ~/.virtualenvs/$DIR_NAME ]; then
        source ~/.virtualenvs/$DIR_NAME/bin/activate
    elif [ ! -d .venv ]; then
        echo Making venv with $(which python)
        python -m venv .venv
    fi

    if [ -d .venv ] &&  [ -z $VIRTUAL_ENV ]; then
        source .venv/bin/activate
    fi
}

use_distrobox() {
    if [ $DISTROBOX_ENTER_PATH ]; then
        echo "Distrobox is already active. Skipping.."
        exit 0
    fi

    export DISTROBOX_NAME=${1:-debian-buster}
    if [ -z $1 ]; then
        if [ -d .distrobox ]; then
            DIR_NAME=$(basename $(pwd))
            export DISTROBOX_NAME=$DIR_NAME
            if [[ ! $(distrobox list | grep $DIR_NAME) ]]; then
                docker build -t distrobox-$DISTROBOX_NAME .distrobox/
                distrobox create --image distrobox-$DISTROBOX_NAME $DISTROBOX_NAME
            fi
        fi
    fi
}
